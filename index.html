<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de XML de Filmes</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }
        .container {
            width: 80%;
            margin: 0 auto;
            padding-top: 50px;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        h1 {
            color: #2c3e50;
        }
        label {
            font-weight: bold;
            display: block;
            margin-top: 10px;
        }
        input[type="text"], textarea {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 20px;
        }
        button:hover {
            background-color: #2980b9;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .result {
            margin-top: 30px;
            background-color: #ecf0f1;
            padding: 20px;
            border-radius: 4px;
        }
        .info {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Gerador de XML de Filmes</h1>
            <p>Busque informações de filmes e gere um arquivo XML com links para assistir ao filme e ao trailer.</p>
        </div>

        <div class="form-group">
            <label for="movie-title">Título do Filme:</label>
            <input type="text" id="movie-title" placeholder="Digite o título do filme">
        </div>

        <button onclick="buscarFilme()">Buscar TMDb</button>
        <button onclick="limparInformacoes()">Limpar Informações</button>

        <div class="result" id="movie-info" style="display:none;">
            <h3>Informações do Filme:</h3>
            <div class="info">
                <p id="movie-title-display"></p>
                <p id="movie-director"></p>
                <p id="movie-year"></p>
                <p id="movie-duration"></p>
                <p id="movie-genre"></p>
                <p id="movie-synopsis"></p>
            </div>
        </div>

        <div class="form-group">
            <label for="magnet-link">Link Magnético:</label>
            <input type="text" id="magnet-link" placeholder="Digite o link magnético">
        </div>

        <div class="form-group">
            <label for="trailer-link">Link do Trailer:</label>
            <input type="text" id="trailer-link" placeholder="Digite o link do trailer">
        </div>

        <button onclick="gerarXML()">Gerar XML</button>
        <button onclick="copiarXML()">Cópia XML</button>

        <div class="result">
            <h3>XML Gerado:</h3>
            <pre id="xml-output"></pre>
        </div>
    </div>

    <script>
        const apiKey = '1fc5f9008cebf466afb65b5a4e0cf5fa';  // Sua chave de API
        const apiUrl = 'https://api.themoviedb.org/3/search/movie?api_key=' + apiKey + '&query=';

        function buscarFilme() {
            const titulo = document.getElementById('movie-title').value;
            const url = apiUrl + encodeURIComponent(titulo);

            fetch(url)
                .then(response => response.json())
                .then(data => {
                    if (data.results && data.results.length > 0) {
                        const filme = data.results[0];  // Pega o primeiro filme da lista
                        exibirInformacoes(filme);  // Função para exibir as informações
                    } else {
                        alert('Filme não encontrado');
                    }
                })
                .catch(error => {
                    console.error('Erro na busca do filme:', error);
                });
        }

        function exibirInformacoes(filme) {
            document.getElementById('movie-title-display').textContent = `Título: ${filme.title}`;
            document.getElementById('movie-director').textContent = 'Diretor: ' + (filme.director || 'Desconhecido');
            document.getElementById('movie-year').textContent = 'Ano: ' + filme.release_date.split('-')[0];
            document.getElementById('movie-duration').textContent = 'Duração: ' + (filme.runtime || 'Desconhecido') + ' min';
            document.getElementById('movie-genre').textContent = 'Gênero: ' + filme.genre_ids.map(id => getGenreName(id)).join(', ');
            document.getElementById('movie-synopsis').textContent = 'Sinopse: ' + (filme.overview || 'Desconhecido');
            document.getElementById('movie-info').style.display = 'block';
        }

        // Função para pegar o nome do gênero usando um ID
        const genresMap = {
            28: "Ação",
            12: "Aventura",
            16: "Animação",
            35: "Comédia",
            80: "Crime",
            99: "Documentário",
            18: "Drama",
            10751: "Família",
            14: "Fantasia",
            36: "História",
            27: "Terror",
            10402: "Música",
            9648: "Mistério",
            10749: "Romance",
            878: "Ficção Científica",
            10770: "TV Movie",
            53: "Suspense",
            10752: "Guerra",
            37: "Faroeste"
        };

        function getGenreName(id) {
            return genresMap[id] || 'Desconhecido';
        }

        function limparInformacoes() {
            document.getElementById('movie-title').value = '';
            document.getElementById('magnet-link').value = '';
            document.getElementById('trailer-link').value = '';
            document.getElementById('movie-info').style.display = 'none';
            document.getElementById('xml-output').textContent = '';
        }

        function gerarXML() {
            const titulo = document.getElementById('movie-title-display').textContent.replace('Título: ', '');
            const magnetLink = document.getElementById('magnet-link').value;
            const trailerLink = document.getElementById('trailer-link').value;

            let xml = `<item>
    <title>[COLOR silver][B]${titulo}[/B][/COLOR][COLOR yellow] FULL HD[/COLOR]</title>
    <link>plugin://plugin.video.elementum/play?uri=magnet:?xt=urn:btih:${magnetLink}$$lsname=[COLOR white]${titulo} - FILME[/COLOR]</link>
    <link>plugin://plugin.video.resolverurl_player?url=${trailerLink}$$lsname=[COLOR aquamarine]TRAILER[/COLOR]</link>
    <thumbnail>https://image.tmdb.org/t/p/original/${filme.poster_path}</thumbnail>
    <fanart>https://image.tmdb.org/t/p/original/${filme.backdrop_path}</fanart>
    <info>
        [COLOR yellow]Título Original:[/COLOR] ${filme.original_title}
        [COLOR yellow]Diretor:[/COLOR] ${filme.director || 'Desconhecido'}
        [COLOR yellow]Ano:[/COLOR] ${filme.release_date.split('-')[0]}
        [COLOR yellow]Duração:[/COLOR] ${filme.runtime || 'Desconhecido'} minutos
        [COLOR yellow]Gênero:[/COLOR] ${filme.genre_ids.map(id => getGenreName(id)).join(', ')}
        [COLOR yellow]Nota no IMDb:[/COLOR] ${filme.vote_average || 'Desconhecida'}
        [COLOR yellow]Sinopse:[/COLOR] ${filme.overview || 'Desconhecida'}
    </info>
</item>`;

            document.getElementById('xml-output').textContent = xml;
        }

        function copiarXML() {
            const xml = document.getElementById('xml-output').textContent;
            navigator.clipboard.writeText(xml).then(() => {
                alert('XML copiado para a área de transferência!');
            });
        }
    </script>
</body>
                </html>
