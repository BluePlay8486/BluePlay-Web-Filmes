<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de XML para Filmes</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #1e1e1e;
            color: white;
            text-align: center;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: auto;
            background: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(255, 255, 255, 0.2);
        }
        h1 {
            color: #7FFFD4;
        }
        .button {
            background-color: #4CAF50; /* Green */
            border: none;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 10px 0;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        .button:hover {
            background-color: #45a049;
        }
        .input-group {
            margin: 10px 0;
        }
        .input-group input {
            width: 80%;
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #ddd;
            background-color: #333;
            color: white;
        }
        .input-group button {
            width: 15%;
            padding: 8px;
            border-radius: 5px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        .input-group button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Gerador de XML para Filmes</h1>
        <div class="input-group">
            <input type="text" id="movieTitle" placeholder="T√≠tulo do Filme">
        </div>
        <button class="button" id="fetchMovieInfo">Buscar Informa√ß√µes</button>
        
        <div id="movieInfo">
            <p><strong>[COLOR yellow]T√≠tulo Original:[/COLOR] <span id="originalTitle"></span></p>
            <p><strong>[COLOR yellow]Dirigido por:[/COLOR] <span id="director"></span></p>
            <p><strong>[COLOR yellow]Ano:[/COLOR] <span id="releaseYear"></span></p>
            <p><strong>[COLOR yellow]Dura√ß√£o:[/COLOR] <span id="duration"></span></p>
            <p><strong>[COLOR yellow]Nota:[/COLOR] <span id="rating"></span></p>
            <p><strong>[COLOR yellow]G√™nero:[/COLOR] <span id="genre"></span></p>
            <p><strong>[COLOR yellow]√Åudio:[/COLOR] <span id="audio"></span></p>
            <p><strong>[COLOR yellow]Sinopse:[/COLOR] <span id="synopsis"></span></p>
        </div>

        <div class="input-group">
            <input type="text" id="trailerLink" placeholder="Link do Trailer (opcional)">
        </div>
        
        <button class="button" id="generateXML">Gerar XML</button>
        <button class="button" id="copyXML">C√≥pia XML üìã</button>
        <button class="button" id="clearForm">Limpar Informa√ß√µes ‚ùå</button>
    </div>

    <script>
        const apiKey = '1fc5f9008cebf466afb65b5a4e0cf5fa';

        $(document).ready(function() {
            $('#fetchMovieInfo').click(function() {
                const movieTitle = $('#movieTitle').val();
                if (movieTitle) {
                    fetchMovieInfo(movieTitle);
                } else {
                    alert('Por favor, insira o t√≠tulo do filme.');
                }
            });

            $('#generateXML').click(function() {
                generateXML();
            });

            $('#copyXML').click(function() {
                copyXML();
            });

            $('#clearForm').click(function() {
                clearForm();
            });
        });

        function fetchMovieInfo(title) {
            const url = `https://api.themoviedb.org/3/search/movie?api_key=${apiKey}&query=${title}`;

            $.get(url, function(data) {
                if (data.results && data.results.length > 0) {
                    const movie = data.results[0];
                    const movieId = movie.id;

                    // Fetch additional movie details
                    fetchMovieDetails(movieId);
                } else {
                    alert('Filme n√£o encontrado.');
                }
            });
        }

        function fetchMovieDetails(movieId) {
            const url = `https://api.themoviedb.org/3/movie/${movieId}?api_key=${apiKey}`;

            $.get(url, function(movie) {
                $('#originalTitle').text(movie.original_title || 'N/A');
                $('#director').text(movie.director || 'N/A');
                $('#releaseYear').text(movie.release_date?.split('-')[0] || 'N/A');
                $('#duration').text(movie.runtime ? movie.runtime + ' minutos' : 'N/A');
                $('#rating').text(movie.vote_average || 'N/A');
                $('#genre').text(movie.genres.map(g => g.name).join(', ') || 'N/A');
                $('#audio').text(movie.spoken_languages.map(lang => lang.name).join(', ') || 'N/A');
                $('#synopsis').text(movie.overview || 'N/A');
            });
        }

        function generateXML() {
            const movieTitle = $('#movieTitle').val();
            const trailerLink = $('#trailerLink').val();
            const xml = `
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<items>
    <item>
        <title>[B]${movieTitle}[/B]</title>
        <link>$$lsname=[COLOR white]${movieTitle} - FILME[/COLOR]</link>
        ${trailerLink ? `<link>plugin://plugin.video.resolverurl_player?url=${trailerLink}$$lsname=[COLOR aquamarine]TRAILER[/COLOR]</link>` : ''}
        <thumbnail>https://image.tmdb.org/t/p/w780/${$('#image').val() || 'default.jpg'}</thumbnail>
        <fanart></fanart>
        <info>
        [COLOR yellow]T√≠tulo Original:[/COLOR] ${$('#originalTitle').text()}
        [COLOR yellow]Dirigido por:[/COLOR] ${$('#director').text()}
        [COLOR yellow]Ano:[/COLOR] ${$('#releaseYear').text()}
        [COLOR yellow]Dura√ß√£o:[/COLOR] ${$('#duration').text()}
        [COLOR yellow]Nota:[/COLOR] ${$('#rating').text()}
        [COLOR yellow]G√™nero:[/COLOR] ${$('#genre').text()}
        [COLOR yellow]√Åudio:[/COLOR] ${$('#audio').text()}
        [COLOR yellow]Sinopse:[/COLOR] ${$('#synopsis').text()}
        </info>
    </item>
</items>
            `;
            alert('XML gerado com sucesso!');
            console.log(xml);
        }

        function copyXML() {
            const xml = $('#generatedXML').text();
            navigator.clipboard.writeText(xml).then(function() {
                alert('XML copiado para a √°rea de transfer√™ncia!');
            }, function() {
                alert('Falha ao copiar XML.');
            });
        }

        function clearForm() {
            $('#movieTitle').val('');
            $('#trailerLink').val('');
            $('#movieInfo').empty();
        }
    </script>
</body>
</html>
