<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de XML para Filmes</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #1e1e1e;
            color: white;
            text-align: center;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: auto;
            background: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
        }
        input, button, textarea {
            margin: 10px 0;
            padding: 10px;
            width: 100%;
            border-radius: 5px;
            border: none;
            box-sizing: border-box;
        }
        button {
            background-color: #4CAF50; /* Verde */
            color: white;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #45a049;
        }
        .button-small {
            background-color: #e74c3c; /* Vermelho */
            font-size: 12px;
            width: 30px;
            padding: 5px;
        }
        textarea {
            height: 150px;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Gerador de XML para Filmes</h1>

        <!-- Campos para preencher informa√ß√µes -->
        <input type="text" id="titulo" placeholder="T√≠tulo do Filme">
        <input type="text" id="trailer" placeholder="Link do Trailer (opcional)">
        <input type="text" id="link_magnetico" placeholder="Link Magn√©tico (opcional)">
        <input type="text" id="thumbnail" placeholder="Link da Thumbnail (opcional)">
        <input type="text" id="fanart" placeholder="Link da Fanart (opcional)">
        
        <!-- Bot√£o para buscar informa√ß√µes do TMDb -->
        <button id="buscar_tmdb">Buscar Informa√ß√µes do TMDb</button>
        
        <h3>Informa√ß√µes:</h3>
        <textarea id="info" placeholder="[COLOR yellow]Sinopse:[/COLOR]"></textarea>

        <h3>Gerar XML:</h3>
        <textarea id="xml_output" readonly></textarea>

        <br>
        <!-- Bot√µes de a√ß√£o -->
        <button id="gerar_xml">Gerar XML</button>
        <button id="limpar_informacoes" class="button-small">X</button>
        <button id="copiar_xml">C√≥pia XML üìã</button>

        <br><br>
    </div>

    <script>
        $(document).ready(function() {
            // Fun√ß√£o para buscar informa√ß√µes do TMDb
            $('#buscar_tmdb').click(function() {
                var titulo = $('#titulo').val();
                if (titulo.trim() === "") {
                    alert("Por favor, insira o t√≠tulo do filme.");
                    return;
                }

                var api_key = "1fc5f9008cebf466afb65b5a4e0cf5fa"; // Sua chave de API
                var url = `https://api.themoviedb.org/3/search/movie?api_key=${api_key}&query=${titulo}`;

                $.get(url, function(data) {
                    if (data.results && data.results.length > 0) {
                        var movie = data.results[0];

                        // Mapeamento de G√™neros num√©ricos para os nomes
                        var genresMapping = {
                            28: 'A√ß√£o',
                            878: 'Fic√ß√£o Cient√≠fica',
                            35: 'Com√©dia',
                            10751: 'Fam√≠lia',
                            12: 'Aventura',
                            14: 'Fantasia',
                            27: 'Terror',
                            99: 'Document√°rio',
                            10402: 'M√∫sica',
                            10749: 'Romance',
                            36: 'Hist√≥ria',
                            53: 'Suspense',
                            80: 'Crime',
                            10752: 'Guerra',
                            37: 'Faroeste'
                        };

                        // Convertendo os n√∫meros de g√™neros para nomes
                        var genres = movie.genre_ids.map(function(id) {
                            return genresMapping[id] || 'Desconhecido';
                        }).join(", ");

                        // Preenchendo as informa√ß√µes
                        $('#info').val(`
[COLOR yellow]T√≠tulo Original:[/COLOR] ${movie.original_title}
[COLOR yellow]Dirigido por:[/COLOR] ${movie.director || 'Desconhecido'}
[COLOR yellow]Ano:[/COLOR] ${movie.release_date ? movie.release_date.substring(0, 4) : 'Desconhecido'}
[COLOR yellow]Dura√ß√£o:[/COLOR] ${movie.runtime || 'Desconhecido'}
[COLOR yellow]Nota:[/COLOR] ${movie.vote_average || 'N/A'}
[COLOR yellow]G√™nero:[/COLOR] ${genres}
[COLOR yellow]√Åudio:[/COLOR] ${movie.original_language || 'Desconhecido'}
[COLOR yellow]Sinopse:[/COLOR] ${movie.overview || 'Desconhecido'}
`);
                    } else {
                        alert("Filme n√£o encontrado.");
                    }
                });
            });

            // Fun√ß√£o para gerar XML
            $('#gerar_xml').click(function() {
                var info = $('#info').val().trim();
                var linkMagnetico = $('#link_magnetico').val().trim();
                var trailer = $('#trailer').val().trim();
                var thumbnail = $('#thumbnail').val().trim();
                var fanart = $('#fanart').val().trim();

                var xml = `<items>
  <item>
    <title>${$('#titulo').val()}</title>
    <link>${linkMagnetico ? 'plugin://plugin.video.elementum/play?uri=' + linkMagnetico : ''}</link>
    ${trailer ? `<link>plugin://plugin.video.resolverurl_player?url=${trailer}</link>` : ''}
    ${thumbnail ? `<thumbnail>${thumbnail}</thumbnail>` : ''}
    ${fanart ? `<fanart>${fanart}</fanart>` : ''}
    <info>${info}</info>
  </item>
</items>`;

                $('#xml_output').val(xml);
            });

            // Fun√ß√£o para limpar as informa√ß√µes
            $('#limpar_informacoes').click(function() {
                $('#titulo').val('');
                $('#trailer').val('');
                $('#link_magnetico').val('');
                $('#thumbnail').val('');
                $('#fanart').val('');
                $('#info').val('');
            });

            // Fun√ß√£o para copiar o XML gerado
            $('#copiar_xml').click(function() {
                var xmlContent = $('#xml_output').val();
                if (xmlContent.trim() !== "") {
                    navigator.clipboard.writeText(xmlContent)
                        .then(function() {
                            alert("XML copiado para a √°rea de transfer√™ncia!");
                        })
                        .catch(function(error) {
                            alert("Falha ao copiar o XML: " + error);
                        });
                } else {
                    alert("Nenhum XML gerado para copiar.");
                }
            });
        });
    </script>

</body>
    </html>
