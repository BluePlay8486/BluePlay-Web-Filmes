<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de XML para Filmes</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #121212;
            color: #fff;
            padding: 20px;
        }
        input, button {
            margin: 10px 0;
            padding: 10px;
            font-size: 16px;
            width: 100%;
            max-width: 400px;
            background-color: #333;
            color: #fff;
            border: none;
            border-radius: 5px;
        }
        button:hover {
            background-color: #444;
        }
        .button-small {
            width: auto;
            margin-right: 10px;
        }
        .button-container {
            display: flex;
            justify-content: flex-start;
            align-items: center;
        }
        .button-container button {
            margin-right: 10px;
        }
        .info-container {
            margin-top: 20px;
        }
        .input-label {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Gerador de XML para Filmes</h1>

    <div class="input-container">
        <label class="input-label" for="movie-title">TÃ­tulo Original (InglÃªs):</label>
        <input type="text" id="movie-title" placeholder="Ex: Sonic the Hedgehog 3">
    </div>

    <div class="button-container">
        <button id="search-tmdb" class="button-small">Buscar InformaÃ§Ãµes do TMDb</button>
        <button id="clear-info" class="button-small">X Limpar InformaÃ§Ãµes</button>
    </div>

    <div class="info-container">
        <label class="input-label">TÃ­tulo Original:</label>
        <input type="text" id="original-title" disabled>
        
        <label class="input-label">Ano:</label>
        <input type="text" id="release-year" disabled>

        <label class="input-label">DuraÃ§Ã£o:</label>
        <input type="text" id="duration" disabled>

        <label class="input-label">Nota:</label>
        <input type="text" id="rating" disabled>

        <label class="input-label">GÃªnero:</label>
        <input type="text" id="genre" disabled>

        <label class="input-label">Sinopse:</label>
        <textarea id="synopsis" disabled></textarea>

        <label class="input-label">Thumbnail:</label>
        <input type="text" id="thumbnail" placeholder="URL da Thumbnail">

        <label class="input-label">Fanart:</label>
        <input type="text" id="fanart" placeholder="URL da Fanart">

        <button id="generate-xml" class="button-small">Gerar XML</button>
    </div>

    <div class="button-container">
        <button id="copy-xml" class="button-small">CÃ³pia XML ðŸ“‹</button>
    </div>

    <script>
        const apiKey = '1fc5f9008cebf466afb65b5a4e0cf5fa'; // Sua chave da API do TMDb
        const baseUrl = 'https://api.themoviedb.org/3';

        const searchButton = document.getElementById('search-tmdb');
        const movieTitleInput = document.getElementById('movie-title');
        const clearButton = document.getElementById('clear-info');
        const generateButton = document.getElementById('generate-xml');
        const copyButton = document.getElementById('copy-xml');

        // FunÃ§Ã£o para buscar informaÃ§Ãµes do filme no TMDb
        searchButton.addEventListener('click', async () => {
            const title = movieTitleInput.value;
            if (!title) return alert('Por favor, insira o tÃ­tulo do filme.');

            try {
                const response = await fetch(`${baseUrl}/search/movie?api_key=${apiKey}&query=${title}&language=pt-BR`);
                const data = await response.json();

                if (data.results && data.results.length > 0) {
                    const movie = data.results[0]; // Pega o primeiro filme encontrado

                    // Atualizando as informaÃ§Ãµes no formulÃ¡rio
                    document.getElementById('original-title').value = movie.original_title;
                    document.getElementById('release-year').value = movie.release_date.split('-')[0];
                    document.getElementById('duration').value = movie.runtime ? `${movie.runtime} min` : 'Desconhecido';
                    document.getElementById('rating').value = movie.vote_average;
                    document.getElementById('genre').value = await getGenres(movie.genre_ids);
                    document.getElementById('synopsis').value = movie.overview || 'Sinopse nÃ£o disponÃ­vel';
                } else {
                    alert('Filme nÃ£o encontrado.');
                }
            } catch (error) {
                console.error('Erro ao buscar informaÃ§Ãµes:', error);
                alert('Erro ao buscar informaÃ§Ãµes. Tente novamente.');
            }
        });

        // FunÃ§Ã£o para obter os nomes dos gÃªneros
        async function getGenres(genreIds) {
            const response = await fetch(`${baseUrl}/genre/movie/list?api_key=${apiKey}&language=pt-BR`);
            const data = await response.json();
            const genres = data.genres;

            return genreIds.map(id => {
                const genre = genres.find(g => g.id === id);
                return genre ? genre.name : '';
            }).join(', ');
        }

        // Limpar as informaÃ§Ãµes
        clearButton.addEventListener('click', () => {
            document.getElementById('original-title').value = '';
            document.getElementById('release-year').value = '';
            document.getElementById('duration').value = '';
            document.getElementById('rating').value = '';
            document.getElementById('genre').value = '';
            document.getElementById('synopsis').value = '';
            document.getElementById('thumbnail').value = '';
            document.getElementById('fanart').value = '';
        });

        // Gerar o XML com base nas informaÃ§Ãµes
        generateButton.addEventListener('click', () => {
            const originalTitle = document.getElementById('original-title').value;
            const releaseYear = document.getElementById('release-year').value;
            const duration = document.getElementById('duration').value;
            const rating = document.getElementById('rating').value;
            const genre = document.getElementById('genre').value;
            const synopsis = document.getElementById('synopsis').value;
            const thumbnail = document.getElementById('thumbnail').value;
            const fanart = document.getElementById('fanart').value;

            const xml = `
<movie>
    <title>${originalTitle}</title>
    <year>${releaseYear}</year>
    <duration>${duration}</duration>
    <rating>${rating}</rating>
    <genre>${genre}</genre>
    <synopsis>${synopsis}</synopsis>
    <thumbnail>${thumbnail}</thumbnail>
    <fanart>${fanart}</fanart>
</movie>`;

            alert('XML gerado com sucesso!');

            // Exemplo de como mostrar ou salvar o XML
            console.log(xml);
        });

        // Copiar XML
        copyButton.addEventListener('click', () => {
            const xmlContent = `
<movie>
    <title>${document.getElementById('original-title').value}</title>
    <year>${document.getElementById('release-year').value}</year>
    <duration>${document.getElementById('duration').value}</duration>
    <rating>${document.getElementById('rating').value}</rating>
    <genre>${document.getElementById('genre').value}</genre>
    <synopsis>${document.getElementById('synopsis').value}</synopsis>
    <thumbnail>${document.getElementById('thumbnail').value}</thumbnail>
    <fanart>${document.getElementById('fanart').value}</fanart>
</movie>`;

            // Copiar o XML para a Ã¡rea de transferÃªncia
            navigator.clipboard.writeText(xmlContent).then(() => {
                alert('XML copiado para a Ã¡rea de transferÃªncia!');
            });
        });
    </script>
</body>
            </html>
